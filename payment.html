<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - KAPDAY</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <style>
        /* General page styles */
        .section-p1 {
            padding: 40px 80px;
        }

        /* Navbar styles */
        #header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0px 60px;
            background: rgb(22, 10, 56);
            box-shadow: 0 5px 15px rgb(167, 106, 37);
            z-index: 999;
            position: sticky;
            top: 0;
            left: 0;
        }

        #navbar {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #navbar li {
            list-style: none;
            padding: 0px 20px;
            position: relative;
        }

        #navbar li a {
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            color: #FFAC82;
            transition: 0.3s ease;
        }

        #navbar li a:hover,
        #navbar li a.active {
            color: #FF9191;
        }

        #navbar li a.active::after,
        #navbar li a:hover::after {
            content: "";
            width: 55%;
            height: 2px;
            background: #088178;
            position: absolute;
            bottom: -4px;
            left: 20px;
        }

        /* Payment Page */
        .payment-page {
            display: flex;
            justify-content: space-between;
            padding: 60px 80px;
        }

        .payment-info {
            flex: 2;
            padding-right: 50px;
        }

        .payment-info h2 {
            font-size: 28px;
            color: rgb(22, 10, 56);
            margin-bottom: 20px;
        }

        .payment-info label {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
            color: #333;
        }

        .payment-info input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .payment-info button {
            padding: 15px;
            background-color: #088178;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 18px;
        }

        .payment-info button:hover {
            background-color: #064c45;
        }
        .truck-button {
            --color: #fff;
            --background: #2B3044;
            --tick: #16BF78;
            --base: #0D0F18;
            --wheel: #2B3044;
            --wheel-inner: #646B8C;
            --wheel-dot: #fff;
            --back: #6D58FF;
            --back-inner: #362A89;
            --back-inner-shadow: #2D246B;
            --front: #A6ACCD;
            --front-shadow: #535A79;
            --front-light: #FFF8B1;
            --window: #2B3044;
            --window-shadow: #404660;
            --street: #646B8C;
            --street-fill: #404660;
            --box: #DCB97A;
            --box-shadow: #B89B66;
            padding: 12px 0;
            width: 172px;
            cursor: pointer;
            text-align: center;
            position: relative;
            border: none;
            outline: none;
            color: var(--color);
            background: var(--background);
            border-radius: var(--br, 5px);
            -webkit-appearance: none;
            -webkit-tap-highlight-color: transparent;
            transform-style: preserve-3d;
            transform: rotateX(var(--rx, 0deg)) translateZ(0);
            transition: transform .5s, border-radius .3s linear var(--br-d, 0s);
            &:before,
            &:after {
                content: '';
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 6px;
                display: block;
                background: var(--b, var(--street));
                transform-origin: 0 100%;
                transform: rotateX(90deg) scaleX(var(--sy, 1));
            }
            &:after {
                --sy: var(--progress, 0);
                --b: var(--street-fill);
            }
            .default,
            .success {
                display: block;
                font-weight: 500;
                font-size: 14px;
                line-height: 24px;
                opacity: var(--o, 1);
                transition: opacity .3s;
            }
            .success {
                --o: 0;
                position: absolute;
                top: 12px;
                left: 0;
                right: 0;
                svg {
                    width: 12px;
                    height: 10px;
                    display: inline-block;
                    vertical-align: top;
                    fill: none;
                    margin: 7px 0 0 4px;
                    stroke: var(--tick);
                    stroke-width: 2;
                    stroke-linecap: round;
                    stroke-linejoin: round;
                    stroke-dasharray: 16px;
                    stroke-dashoffset: var(--offset, 16px);
                    transition: stroke-dashoffset .4s ease .45s;
                }
            }
            .truck {
                position: absolute;
                width: 72px;
                height: 28px;
                transform: rotateX(90deg) translate3d(var(--truck-x, 4px), calc(var(--truck-y-n, -26) * 1px), 12px);
                &:before,
                &:after {
                    content: '';
                    position: absolute;
                    bottom: -6px;
                    left: var(--l, 18px);
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    z-index: 2;
                    box-shadow: inset 0 0 0 2px var(--wheel), inset 0 0 0 4px var(--wheel-inner);
                    background: var(--wheel-dot);
                    transform: translateY(calc(var(--truck-y) * -1px)) translateZ(0);
                }
                &:after {
                    --l: 54px;
                }
                .wheel,
                .wheel:before {
                    position: absolute;
                    bottom: var(--b, -6px);
                    left: var(--l, 6px);
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background: var(--wheel);
                    transform: translateZ(0);
                }
                .wheel {
                    transform: translateY(calc(var(--truck-y) * -1px)) translateZ(0);
                }
                .wheel:before {
                    --l: 35px;
                    --b: 0;
                    content: '';
                }
                .front,
                .back,
                .box {
                    position: absolute;
                }
                .back {
                    left: 0;
                    bottom: 0;
                    z-index: 1;
                    width: 47px;
                    height: 28px;
                    border-radius: 1px 1px 0 0;
                    background: linear-gradient(68deg, var(--back-inner) 0%, var(--back-inner) 22%, var(--back-inner-shadow) 22.1%, var(--back-inner-shadow) 100%);
                    &:before,
                    &:after {
                        content: '';
                        position: absolute;
                    }
                    &:before {
                        left: 11px;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        z-index: 2;
                        border-radius: 0 1px 0 0;
                        background: var(--back);
                    }
                    &:after {
                        border-radius: 1px;
                        width: 73px;
                        height: 2px;
                        left: -1px;
                        bottom: -2px;
                        background: var(--base);
                    }
                }
                .front {
                    left: 47px;
                    bottom: -1px;
                    height: 22px;
                    width: 24px;
                    -webkit-clip-path: polygon(55% 0, 72% 44%, 100% 58%, 100% 100%, 0 100%, 0 0);
                    clip-path: polygon(55% 0, 72% 44%, 100% 58%, 100% 100%, 0 100%, 0 0);
                    background: linear-gradient(84deg, var(--front-shadow) 0%, var(--front-shadow) 10%, var(--front) 12%, var(--front) 100%);
                    &:before,
                    &:after {
                        content: '';
                        position: absolute;
                    }
                    &:before {
                        width: 7px;
                        height: 8px;
                        background: #fff;
                        left: 7px;
                        top: 2px;
                        -webkit-clip-path: polygon(0 0, 60% 0%, 100% 100%, 0% 100%);
                        clip-path: polygon(0 0, 60% 0%, 100% 100%, 0% 100%);
                        background: linear-gradient(59deg, var(--window) 0%, var(--window) 57%, var(--window-shadow) 55%, var(--window-shadow) 100%)
                    }
                    &:after {
                        width: 3px;
                        height: 2px;
                        right: 0;
                        bottom: 3px;
                        background: var(--front-light);
                    }
                }
                .box {
                    width: 13px;
                    height: 13px;
                    right: 56px;
                    bottom: 0;
                    z-index: 1;
                    border-radius: 1px;
                    overflow: hidden;
                    transform: translate(calc(var(--box-x, -24) * 1px), calc(var(--box-y, -6) * 1px)) scale(var(--box-s, .5));
                    opacity: var(--box-o, 0);
                    background: linear-gradient(68deg, var(--box) 0%, var(--box) 50%, var(--box-shadow) 50.2%, var(--box-shadow) 100%);
                    background-size: 250% 100%;
                    background-position-x: calc(var(--bx, 0) * 1%);
                    &:before,
                    &:after {
                        content: '';
                        position: absolute;
                    }
                    &:before {
                        content: '';
                        background: rgba(white, .2);
                        left: 0;
                        right: 0;
                        top: 6px;
                        height: 1px;
                    }
                    &:after {
                        width: 6px;
                        left: 100%;
                        top: 0;
                        bottom: 0;
                        background: var(--back);
                        transform: translateX(calc(var(--hx, 0) * 1px));
                    }
                }
            }
            &.animation {
                --rx: -90deg;
                --br: 0;
                .default {
                    --o: 0;
                }
                &.done {
                    --rx: 0deg;
                    --br: 5px;
                    --br-d: .2s;
                    .success {
                        --o: 1;
                        --offset: 0;
                    }
                }
            }
        }
        
        html {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }
        
        * {
            box-sizing: inherit;
            &:before,
            &:after {
                box-sizing: inherit;
            }
        }
        
            .dribbble {
                position: fixed;
                display: block;
                right: 20px;
                bottom: 20px;
                img {
                    display: block;
                    height: 28px;
                }
            }
            .twitter {
                position: fixed;
                display: block;
                right: 64px;
                bottom: 14px;
                svg {
                    width: 32px;
                    height: 32px;
                    fill: #1da1f2;
                }
            }
        .cart-summary {
            flex: 1;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
        }

        .cart-summary h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .cart-summary div {
            margin-bottom: 10px;
        }

        .cart-summary div span {
            float: right;
            font-weight: bold;
        }

        .cart-summary p {
            margin-top: 20px;
            font-size: 14px;
            color: red;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Navbar Section -->
    <section id="header">
        <a href="index.html"><img src="./resources/navbar/brand.png" class="logo" alt="logo" height="75" width="75"></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">HOME</a></li>
                <li><a href="shop.html">SHOP</a></li>
                <li><a href="about.html">ABOUT</a></li>
                <li><a href="contact.html">CONTACT</a></li>
                <li><a href="cart.html"><img src="./resources/navbar/cart.png" alt="" height="20" width="20">Cart</a></li>
                <li id="user-info">
                    <a href="#" id="user-name">Hello, Customer</a>
                    <ul id="dropdown">
                        <li><a href="more-info.html">Details</a></li>
                        <li><a href="index.html" id="logout">Log Out</a></li>
                    </ul>
                </li>                
            </ul>
        </div>
    </section>

    <!-- Payment Page Content -->
    <section class="payment-page section-p1">
        <!-- Payment Form -->
        <!-- Payment Form -->
<div class="payment-info">
    <h2>Payment Information</h2>
    <form id="paymentForm">
        <label for="cardName">Name on Card</label>
        <input type="text" id="cardName" placeholder="John Doe" required>

        <label for="cardNumber">Card Number</label>
        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>

        <label for="expiryDate">Expiry Date</label>
        <input type="text" id="expiryDate" placeholder="MM/YY" required>

        <label for="cvv">CVV</label>
        <input type="text" id="cvv" placeholder="123" required>

        <!-- Custom Truck Button -->
        <button class="truck-button">
            <span class="default">Place Order</span>
            <span class="success">
                Order Placed
                <svg viewbox="0 0 12 10">
                    <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
            </span>
            <div class="truck">
                <div class="wheel"></div>
                <div class="back"></div>
                <div class="front"></div>
                <div class="box"></div>
            </div>
        </button>
    </form>
</div>

        <!-- Cart Summary -->
        <div class="cart-summary">
            <h2>Order Summary</h2>
            <div>Subtotal <span id="subtotal">$0</span></div>
            <div>Tax <span id="tax">$0</span></div>
            <div>Total <span id="total">$0</span></div>
            <p>* All payments are secured with end-to-end encryption</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="section-p1">
        <div class="copyright">
            <p>© FUNTOOSH @ 2024 | All Rights Reserved</p>
        </div>
    </footer>

    <!-- Include GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script>
        // Load Cart Data and Display on Payment Page
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let subtotal = 0;
        
        // Calculate subtotal and tax
        cart.forEach(product => {
            subtotal += product.price * product.quantity;
        });

        let tax = subtotal * 0.08; // 8% tax
        let total = subtotal + tax;

        // Display order summary
        document.getElementById('subtotal').innerText = '$' + subtotal.toFixed(2);
        document.getElementById('tax').innerText = '$' + tax.toFixed(2);
        document.getElementById('total').innerText = '$' + total.toFixed(2);

        // Handle Payment Submission
        document.getElementById('paymentForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Perform Payment (Mocked)
            alert('Payment Successful!');

            // Clear the cart after successful payment
            localStorage.removeItem('cart');
            window.location.href = 'index.html'; // Redirect to home or order confirmation page
        });

        // Load user data on page load
        window.addEventListener('DOMContentLoaded', (event) => {
            const userInfo = document.getElementById('user-info');
            const userName = localStorage.getItem('userName');
            const isVerified = localStorage.getItem('isVerified');
            const userNameElement = document.getElementById('user-name');
         
            if (userName && isVerified === 'true') {
                userNameElement.textContent = `Hello, ${userName}`;
            } else {
                userInfo.innerHTML = `<a href="login.html"><img src="./resources/navbar/log.png" height="20" width="20">Login</a>`;
            }
        });

        // Logout functionality
        document.getElementById('logout').addEventListener('click', function() {
            localStorage.removeItem('userName');
            localStorage.removeItem('isVerified');
            window.location.href = 'login.html';
        });
    </script>
    <script>
        document.querySelectorAll('.truck-button').forEach(button => {
            button.addEventListener('click', e => {
                e.preventDefault();
    
                let box = button.querySelector('.box'),
                    truck = button.querySelector('.truck');
    
                if (!button.classList.contains('done')) {
    
                    if (!button.classList.contains('animation')) {
                        button.classList.add('animation');
    
                        gsap.to(button, {
                            '--box-s': 1,
                            '--box-o': 1,
                            duration: .3,
                            delay: .5
                        });
    
                        gsap.to(box, {
                            x: 0,
                            duration: .4,
                            delay: .7
                        });
    
                        gsap.to(button, {
                            '--hx': -5,
                            '--bx': 50,
                            duration: .18,
                            delay: .92
                        });
    
                        gsap.to(box, {
                            y: 0,
                            duration: .1,
                            delay: 1.15
                        });
    
                        gsap.set(button, {
                            '--truck-y': 0,
                            '--truck-y-n': -26
                        });
    
                        gsap.to(button, {
                            '--truck-y': 1,
                            '--truck-y-n': -25,
                            duration: .2,
                            delay: 1.25,
                            onComplete() {
                                gsap.timeline({
                                    onComplete() {
                                        button.classList.add('done');
    
                                        // Redirect to index.html after animation completes
                                        setTimeout(() => {
                                            alert('Order Placed Successfully!');
                                            window.location.href = 'index.html'; // Redirect to index.html
                                        }, 2000); // 2-second delay after animation
                                    }
                                }).to(truck, {
                                    x: 0,
                                    duration: .4
                                }).to(truck, {
                                    x: 40,
                                    duration: 1
                                }).to(truck, {
                                    x: 20,
                                    duration: .6
                                }).to(truck, {
                                    x: 96,
                                    duration: .4
                                });
                                gsap.to(button, {
                                    '--progress': 1,
                                    duration: 2.4,
                                    ease: "power2.in"
                                });
                            }
                        });
                    }
    
                } else {
                    button.classList.remove('animation', 'done');
                    gsap.set(truck, {
                        x: 4
                    });
                    gsap.set(button, {
                        '--progress': 0,
                        '--hx': 0,
                        '--bx': 0,
                        '--box-s': .5,
                        '--box-o': 0,
                        '--truck-y': 0,
                        '--truck-y-n': -26
                    });
                    gsap.set(box, {
                        x: -24,
                        y: -6
                    });
                }
            });
        });
    </script>
    
</body>
</html>
